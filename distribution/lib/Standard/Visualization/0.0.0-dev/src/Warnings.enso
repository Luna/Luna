from Standard.Base import all

## PRIVATE

   Default preprocessor for the warnings visualization.

   Generates JSON text describing the warnings visualization.

   Arguments:
   - value: the value to be visualized.
process_to_json_text : Any -> Text
process_to_json_text value =
    warnings = Warning.get_all value
    text = warnings.map w->w.value.to_display_text
    case Warning.reached_limit value of
        True ->
          len = text.length
          vec = Vector.new (len+1) (i-> if i < len then text.at i else "Warnings limit reached.")
          vec.to_json
        False ->
          text.to_json
