from Standard.Base import all

## PRIVATE
   Basic preprocessor for widgets metadata visualization.

   Returns full annotation data for all requested arguments.
get_widget_json : Any -> Text -> Vector Text -> Text
get_widget_json value call_name argument_names =
    meta = Meta.meta call_name...
    annotations = case meta of
        _ : Meta.Function ->
            read_new_annotation argument =
                annotation = Warning.clear <| meta.get_annotation argument
                case annotation of
                    _ : Function -> annotation value
                    _ -> annotation
            argument_names.map (arg -> [arg, read_new_annotation arg])
        _ ->
            read_annotation argument =
                annotation = Warning.clear <| Meta.get_annotation value call_name argument
                case annotation of
                    _ : Function -> annotation value
                    _ -> annotation

            argument_names.map (arg -> [arg, read_annotation arg])

    annotations.to_json
