from Standard.Base import all

type Regex_Options
    ## Default options for regex matching.
    Default

    ## Allows customization of regex matching options.

       Arguments:
       - multiline: Enables or disables the multiline option. Multiline specifies
         that the `^` and `$` pattern characters match the start and end of lines,
         as to well as the start and end of the input, respectively.
       - match_ascii: Enables or disables pure-ASCII matching for the regex. If you
         know your data only contains ASCII, you can enable this for a performance
         boost on some regex engines.
       - dot_matches_newline: Enables or disables the dot matches newline option.
         This specifies that the `.` special character should match everything
         _including_ newline characters. Without this flag, it matches all
         characters _except_ newlines.
       - comments: Enables or disables the comments mode for the regular expression.
         In comments mode, the following changes apply:
         - Whitespace within the pattern is ignored, except when within a character
           class or when preceded by an unescaped backslash, or within grouping
           constructs (e.g. `(?...)`).
         - When a line contains a `#` that is not in a character class and is not
           preceded by an unescaped backslash, all characters from the leftmost such
           `#` to the end of the line are ignored. That is to say; they act as
           'comments' in the regex.
    Custom (multiline : Boolean = False) (match_ascii : Boolean = False) (dot_matches_newline : Boolean = False) (comments : Boolean = False)

    ## PRIVATE
    compile : Text -> Boolean -> Pattern
    compile pattern case_insensitive = case self of
        Default ->
            Regex.compile pattern case_insensitive=case_insensitive
        Custom multiline match_ascii dot_matches_newline comments ->
            Regex.compile pattern case_insensitive=case_insensitive match_ascii=match_ascii dot_matches_newline=dot_matches_newline multiline=multiline comments=comments
