import project.Data.Text.Text
import project.Error.Error
import project.Panic.Panic
import project.Error.Common.Type_Error

from project.Error.Common import No_Such_Method, Unsupported_Argument_Types

polyglot java import java.lang.ClassCastException

## UNSTABLE

   An error indicating that some elements are incomparable.

type Incomparable_Values
    ## An error that indicates that the two values are not comparable

       Arguments:
       - left: The left value (first operand)
       - right: The right value (second operand)
    Error left=Nothing right=Nothing

    ## UNSTABLE

       Convert the Incomparable_Values error to a human-readable format.
    to_display_text : Text
    to_display_text self =
        case self.left.is_nothing && self.right.is_nothing of
            True -> "Incomparable_Values.Error"
            False -> "Cannot compare `" + self.left.to_text + "` with `" + self.right.to_text + "`"


    ## ADVANCED
       Catches possible errors from comparing values and throws an
       `Incomparable_Values` if any occur.
    handle_errors ~function =
        handle t = Panic.catch t handler=(_-> Error.throw Incomparable_Values.Error)
        handle ClassCastException <| handle No_Such_Method.Error <| handle Type_Error.Error <| handle Unsupported_Argument_Types.Error <|
            function.catch Type_Error.Error handler=(_-> Error.throw Incomparable_Values.Error)
