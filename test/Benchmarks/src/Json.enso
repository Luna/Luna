from Base import all

import Test.Bench

prep_json size =
    single = '{"foo": 543}, {"bar": false}'
    many = Vector.new size (_ -> single)
    str = "[" + (many.join ",") + "]"
    str

main =
    json = Base.Json.parse (Base.File.read "/tmp/twitter.json")
    Bench.measure (json.to_text_1) "old to_text" 10 10
    Bench.measure (json.to_text) "new to_text" 10 10
