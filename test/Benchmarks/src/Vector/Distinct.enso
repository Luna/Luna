from Standard.Base import all

from Standard.Test import Bench
from Standard.Test.Bench import Phase_Conf

import project.Vector.Utils


options = Bench.options . set_warmup (Phase_Conf.Iters 2) . set_measure (Phase_Conf.Iters 2)

random_vec = Utils.make_random_vec 100000
uniform_vec = Vector.fill 100000 1
random_text_vec = random_vec.map .to_text
uniform_text_vec = random_vec.map .to_text

collect_benches = Bench.build builder->
    builder.group "Vector Distinct" options group_builder->
        group_builder.specify "Random Integer Vector Distinct" <|
            random_vec.distinct
        group_builder.specify "Uniform Integer Vector Distinct" <|
            uniform_vec.distinct
        group_builder.specify "Random Text Vector Distinct" <|
            random_text_vec.distinct
        group_builder.specify "Uniform Text Vector Distinct" <|
            uniform_text_vec.distinct


main = all_benches . run_main
