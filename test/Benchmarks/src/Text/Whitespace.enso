from Standard.Base import all

import Standard.Test.Bench
import Standard.Test.Faker

polyglot java import org.enso.base.Text_Utils

main =
    split_whitespace str =
        Text_Utils.split_on_whitespace str False
    split_words str =
        str.words
    bench_strcmp suite_prefix fun character_template =
        faker = Faker.new
        make_alpha_template length = Vector.new length _-> character_template
        very_short_template = make_alpha_template 4
        very_short = faker.string_value very_short_template
        medium_template = make_alpha_template 64
        medium = faker.string_value medium_template

        big_template = make_alpha_template 100000
        big_random = faker.string_value big_template

        Bench.measure (fun very_short) suite_prefix+"very short" 10 10
        Bench.measure (fun medium) suite_prefix+"medium" 10 10
        Bench.measure (fun big_random) suite_prefix+"big - random" 10 10

    bench_strcmp "split whitespace ASCII " split_whitespace Faker.upper_case_letters+' '.char_vector
    bench_strcmp "split words ASCII " split_words Faker.upper_case_letters+' '.char_vector
