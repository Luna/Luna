dependencies:
    pre:
        - sudo apt-get update && sudo apt-get install python3
        - curl -L https://github.com/commercialhaskell/stack/releases/download/v1.3.0/stack-1.3.0-linux-x86_64.tar.gz | tar zx -C /tmp
        - sudo mv /tmp/stack-1.3.0-linux-x86_64/stack /usr/bin
    override:
        - stack setup
        - rm -fr $(stack path --dist-dir) $(stack path --local-install-root)
        - stack build --stack-yaml core/stack.yaml --copy-bins --fast --test --bench
        - stack build --stack-yaml compiler/stack.yaml --copy-bins --fast --test --bench
        - stack build --stack-yaml parser/stack.yaml --copy-bins --fast --test --bench
